{% extends "base.html" %}

{% block title %}Quáº£n lÃ½ tuyáº¿n Ä‘Æ°á»ng - Há»‡ thá»‘ng quáº£n lÃ½ váº­n chuyá»ƒn{% endblock %}

{% block content %}
<h2>ğŸ›£ï¸ Quáº£n lÃ½ tuyáº¿n Ä‘Æ°á»ng</h2>

<div style="background: rgba(155, 89, 182, 0.1); padding: 20px; border-radius: 10px; margin-bottom: 30px;">
    <h3 style="color: #9b59b6; margin-bottom: 15px;">â• ThÃªm tuyáº¿n má»›i</h3>
    <form method="post" action="/routes/add" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px;">
        <div class="form-group">
            <label for="route_code">MÃ£ tuyáº¿n *</label>
            <input type="text" id="route_code" name="route_code" required placeholder="VD: NA_002">
        </div>
        <div class="form-group">
            <label for="route_name">TÃªn tuyáº¿n *</label>
            <input type="text" id="route_name" name="route_name" required placeholder="VD: Kho Trung Chuyá»ƒn -> BÆ°u Cá»¥c">
        </div>
        <div class="form-group">
            <label for="distance">Khoáº£ng cÃ¡ch (km)</label>
            <input type="number" id="distance" name="distance" step="0.1" placeholder="VD: 178">
        </div>
        <div class="form-group">
            <label for="unit_price">ÄÆ¡n giÃ¡ (VNÄ/km)</label>
            <input type="number" id="unit_price" name="unit_price" step="100" placeholder="VD: 6724">
        </div>
        <div class="form-group">
            <label for="employee_id">NhÃ¢n viÃªn phá»¥ trÃ¡ch *</label>
            <select id="employee_id" name="employee_id" required>
                <option value="">Chá»n nhÃ¢n viÃªn</option>
                {% for employee in employees %}
                <option value="{{ employee.id }}">{{ employee.name }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group">
            <label for="vehicle_id">Xe phá»¥ trÃ¡ch *</label>
            <select id="vehicle_id" name="vehicle_id" required>
                <option value="">Chá»n xe</option>
                {% for vehicle in vehicles %}
                <option value="{{ vehicle.id }}">{{ vehicle.license_plate }}</option>
                {% endfor %}
            </select>
        </div>
        <div class="form-group" style="display: flex; align-items: end;">
            <button type="submit" class="btn btn-success">ThÃªm tuyáº¿n</button>
        </div>
    </form>
</div>

<h3>ğŸ“‹ Danh sÃ¡ch tuyáº¿n Ä‘Æ°á»ng</h3>
{% if routes %}
<table class="table">
    <thead>
        <tr>
            <th>STT</th>
            <th>MÃ£ tuyáº¿n</th>
            <th>TÃªn tuyáº¿n</th>
            <th>Khoáº£ng cÃ¡ch</th>
            <th>ÄÆ¡n giÃ¡</th>
            <th>NhÃ¢n viÃªn</th>
            <th>Xe</th>
            <th>Tráº¡ng thÃ¡i</th>
        </tr>
    </thead>
    <tbody>
        {% for route in routes %}
        <tr>
            <td>{{ loop.index }}</td>
            <td><strong>{{ route.route_code }}</strong></td>
            <td>{{ route.route_name }}</td>
            <td>{{ route.distance }} km</td>
            <td>{{ "{:,.0f}".format(route.unit_price) }} VNÄ/km</td>
            <td>{{ route.employee.name }}</td>
            <td>{{ route.vehicle.license_plate }}</td>
            <td>
                <span style="background: rgba(39, 174, 96, 0.1); color: #27ae60; padding: 5px 10px; border-radius: 15px; font-size: 0.9em;">
                    âœ… Hoáº¡t Ä‘á»™ng
                </span>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div style="text-align: center; padding: 40px; color: #7f8c8d;">
    <h3>ğŸ›£ï¸ ChÆ°a cÃ³ tuyáº¿n nÃ o</h3>
    <p>HÃ£y thÃªm tuyáº¿n Ä‘áº§u tiÃªn báº±ng form bÃªn trÃªn</p>
</div>
{% endif %}

<div style="margin-top: 30px; padding: 20px; background: rgba(241, 196, 15, 0.1); border-radius: 10px; border-left: 4px solid #f1c40f;">
    <h4 style="color: #f39c12; margin-bottom: 10px;">ğŸ’¡ LÆ°u Ã½:</h4>
    <ul style="color: #2c3e50; line-height: 1.6;">
        <li>Má»—i tuyáº¿n pháº£i cÃ³ nhÃ¢n viÃªn vÃ  xe phá»¥ trÃ¡ch</li>
        <li>ÄÆ¡n giÃ¡ Ä‘Æ°á»£c tÃ­nh theo VNÄ/km Ä‘á»ƒ tÃ­nh lÆ°Æ¡ng chuyáº¿n</li>
        <li>Khoáº£ng cÃ¡ch giÃºp tÃ­nh toÃ¡n chi phÃ­ xÄƒng dáº§u chÃ­nh xÃ¡c</li>
        <li>CÃ³ thá»ƒ phÃ¢n cÃ´ng má»™t nhÃ¢n viÃªn cho nhiá»u tuyáº¿n</li>
    </ul>
</div>

{% if not employees or not vehicles %}
<div style="margin-top: 20px; padding: 20px; background: rgba(231, 76, 60, 0.1); border-radius: 10px; border-left: 4px solid #e74c3c;">
    <h4 style="color: #e74c3c; margin-bottom: 10px;">âš ï¸ Cáº§n thÃªm dá»¯ liá»‡u:</h4>
    <ul style="color: #2c3e50; line-height: 1.6;">
        {% if not employees %}<li>ChÆ°a cÃ³ nhÃ¢n viÃªn. <a href="/employees" style="color: #3498db;">ThÃªm nhÃ¢n viÃªn</a></li>{% endif %}
        {% if not vehicles %}<li>ChÆ°a cÃ³ xe. <a href="/vehicles" style="color: #3498db;">ThÃªm xe</a></li>{% endif %}
    </ul>
</div>
{% endif %}
{% endblock %}
